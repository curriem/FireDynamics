\documentclass{article}
\usepackage{graphicx}
\usepackage{fullpage}
\usepackage{hyperref}


\begin{document}

\title{Fire Dynamics Repository Manual}
\author{M. Currie \\ \href{mailto:mileshcurrie@gmail.com}{mileshcurrie@gmail.com} }
\maketitle

\section{Preface}
This manual is meant to provide a quick introduction to the ``FireDynamics'' repository I have created on GitHub. This is by no means a step-by-step quide on how to run the scripts, however it will focus on the big picture ideas of how things run. I have made it a point to document all of the scripts very well, so the hope is that with this manual and the documentation in the code, a user should be able to run everything with little instruction. There will be some details that I will unintentionally leave out, so I invite the user to contact me with any questions if they feel that a certain section is not intuitive enough.  

\section{firePropagationModel.py}
\subsection{Description}

This script models the propagation of a fire based on
heuristic rules that were deduced by observation. The
driving factor in the propagation is the probability of
a cell that is on fire to light one of its neighbors on
fire. If one inspects the functions that have to do with
probability, the made-up heuristic rules can be seen
clearly. These rules are always changing, so this document
will be edited with more detail later.
\par
The idea for this model is to start out with some initial
fire, which can be specified by the user to be a point, line,
parabola, or the initial frame from a real dataset and use
the heuristic probability rules to let the fire propagate for
the specified number of timesteps. In addition to the parameter
for the number of timesteps, the other parameters that can be
specified are how big the user wants the propagation frame to be
(N), how far the fire can spread in one timestep (numLayers), the
number of timesteps that a cell can stay on fire for (masterBurnTime),
and two flags that specify whether the user wants to plot
and save the resulting images.
\par
The basic structure of this script is as follows: The script loops
over the number of specified timesteps and for each timestep, it
calculates a new frame in which the fire has propagated.
For each iteration, the script looks for pixels that are on fire,
which are flagged by a positive integer. For each of the on fire
pixels, the script ``rolls a dice'' to determine if its neighbors
light on fire in the next frame. The probabilities are based on the
distance from the pixel of interest and some master probability that
can be spceified by the user. If some on fire pixel reaches the number
specified with the masterBurnTime parameter, the pixel is flagged as
a ``-1'', which means that pixel is burnt and can no longer
light on fire.
\par
After the script has run through its iterations, it plots and saves
the images (if these flags are set to ``True''), which shows
the propagation.

\subsection{Companion Scripts}
There are two companion scripts to this one: makeImages.py and makeMovies.py. The functions of these scripts are just as intuitive as they sound. The former takes in the path to the numpy files that were generated from the model and creates/saves images of them. The keyword arguments in the creation of the images have been specifically tuned for fires to make them both visually appealing and consistent. The latter script takes the images generated and uses ffmpeg to create an mp4 movie so the user can see the fire propagate. 



\section{DMD\_reconstruction.py}

This script was originally created by Alessandro Alla to perform a dynamic mode decomposition (DMD) analysis on the real data that is available. The script was originally written in MATLAB, but I translated it to python to make it run better on my machine. Presently, it is unclear what we are going to accomplish using this type of analysis, therefore, I won't elaborate much on the subject. If the user is interested enough, I would suggest reading up on DMD to see some of its capabilities. 

\section{ThermalCubeAnalysis.py}
Again, this script was not written by me. It was aquired from Kevin Speer to analyze the data from the fire box experiment that we have occasionally conducted. This is a simple script that takes in a csv file and plots the temperature and heat flux from the fire. In theory, once the gas sensors on the box are up and running, this script will also plot statistics for the humidity in the air and the oxygen levels in the air. At the time of writing, the latter features were not up and running on the fire box.

\section{interpretDMD.py}
This script is basically an amalgamation of the scripts ``makeImages.py'' and ``makeMovies.py'' but tailored to the results of the DMD reconstruction code. 

\section{aggregatePixels.py}

\section{computeDiffCoeff.py}

\section{fireStats.py}

\section{Complete\_Video\_Analysis.py}


\end{document}

